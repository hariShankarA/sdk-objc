syntax = "proto3";
package io.token.proto.common.transferinstructions;

option java_outer_classname = "TransferInstructionsProtos";

import "address.proto";
import "banklink.proto";
import "security.proto";

enum PurposeOfPayment {
  INVALID = 0;
  OTHER = 1;
}

// Money transfer instructions.
message TransferInstructions {
  Source source = 1;                            // Transfer source.
  repeated Destination destinations = 2;        // Transfer desitination.
  PurposeOfPayment transfer_purpose = 3;        // Transfer purpose.
}

message CustomerData {
  repeated string legal_names = 1;              // Repeated in case of joint account holders.
  io.token.proto.common.address.Address address = 2;
}

// Money transfer source. This could be either a token account or a bank authorization.
message Source {

  // Token Acccount Source
  message TokenSource {
    string member_id = 1;
    string account_id = 2;
  }

  // One-time encrypted authorization to an account
  message BankAuthorizationSource {
    io.token.proto.banklink.BankAuthorization bankAuthorization = 1;
  }

  oneof source {
    TokenSource tokenSource = 1;
    BankAuthorizationSource bankAuthorizationSource = 2;
  }

  CustomerData customer_data = 3;
}

// Money transfer destination. The destination is described differently
// depending on the transfer method being used.
message Destination {

  // Token account Destination
  message TokenDestination {
    string member_id = 1;
    string account_id = 2;
  }

  // SWIFT tranfer destination
  message SwiftDestination {
    string bic = 1;
    string account = 2;
  }

  // SEPA transfer destination
  message SepaDestination {
    string iban = 1;
  }

  // ACH transfer destination
  message AchDestination {
    string routing = 1;
    string account = 2;
  }

  oneof destination {
    TokenDestination tokenDestination = 1;
    SwiftDestination swiftDestination = 2;
    SepaDestination sepaDestination = 3;
    AchDestination achDestination = 4;
  }

  CustomerData customer_data = 5;
}

